---
permalink: deploy/prerequisites.html 
sidebar: sidebar 
keywords: ONTAP tools,Storage Replication Adapter 
summary: 在部署ONTAP tools for VMware vSphere之前，您应该熟悉部署包的空间要求和一些基本的主机系统要求。 
---
= ONTAP tools for VMware vSphere的要求和配置限制
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
在部署ONTAP tools for VMware vSphere之前，您应该熟悉部署包的空间要求和一些基本的主机系统要求。

您可以将适用ONTAP tools for VMware vSphere与 VMware vCenter Server Virtual Appliance (vCSA) 结合使用。您应该在包含 ESXi 系统的受支持的 vSphere 客户端上部署ONTAP tools for VMware vSphere。



== 系统要求

* *每个节点的安装包空间要求*
+
** 精简配置安装需要 15 GB
** 厚配置安装需要 348 GB


* *主机系统大小要求* 根据部署大小推荐的内存如下表所示。要部署高可用性 (HA)，您将需要表中指定的三倍设备大小。


|===


| *部署类型* | *每个节点的 CPU 数量* | *每个节点的内存（GB）* | *每个节点厚配置的磁盘空间（GB）* 


| 小型 | 9 | 18 | 350 


| 中 | 13 | 26 | 350 


| 大型注意：大型部署仅适用于 HA 配置。 | 17 | 34 | 350 
|===

NOTE: 启用备份后，每个ONTAP工具集群都需要在部署虚拟机的数据存储上额外 50 GB 的空间。因此，非 HA 需要 400 GB，而 HA 总共需要 1100 GB 的空间。



== 最低存储和应用要求

|===
| 存储、主机和应用程序 | 版本要求 


| ONTAP | 9.14.1、9.15.1、9.16.0、9.16.1 和 9.16.1P3 FAS、 ASA A 系列、 ASA C 系列、 AFF A 系列、 AFF C 系列和ASA r2。 


| ONTAP工具支持的 ESXi 主机 | 7.0.3 及更高版本 


| ONTAP工具支持 vCenter Server | 7.0U3 及以上版本 


| VASA Provider | 3.0 


| OVA 应用程序 | 10.4 


| ESXi 主机部署ONTAP工具虚拟机 | 7.0U3 和 8.0U3 


| vCenter Server 部署ONTAP工具虚拟机 | 7.0 和 8.0 
|===

NOTE: 从适用于ONTAP tools for VMware vSphere开始，虚拟机硬件从版本 10 更改为 17。

互操作性表工具 (IMT) 包含有关ONTAP、vCenter Server、ESXi 主机和插件应用程序的受支持版本的最新信息。

https://imt.netapp.com/matrix/imt.jsp?components=105475;&solution=1777&isHWU&src=IMT["互操作性表工具"^]



== 端口要求

下表概述了NetApp使用的网络端口及其用途。端口分为三种类型：

* 外部端口：这些端口可以从 Kubernetes 集群或节点外部访问。它们允许服务与外部网络或用户通信，从而实现与集群环境之外的系统集成。
* 节点间端口：这些端口允许 Kubernetes 集群内的节点之间进行通信。它们是集群任务（例如数据共享和协同工作）所必需的。对于单节点部署，节点间端口仅在节点内部使用，不需要外部访问。节点间端口可以接受来自集群外部的流量。使用防火墙规则阻止节点间端口访问互联网。
* 内部端口：这些端口使用 ClusterIP 地址在 Kubernetes 集群内部进行通信。它们不会对外暴露，因此无需添加到防火墙规则中。



NOTE: 确保所有ONTAP工具节点位于同一子网，以保持彼此之间不间断的通信。


|===
| *服务/组件名称* | *港口* | *协议* | *端口类型* | *描述* 


| ntv-gateway-svc (LB) | 443、8443 | TCP | 外部 | 用于 VASA 提供商服务的传入通信的直通端口。VASA 提供程序自签名证书和自定义 CA 证书托管在此端口上。 


| SSH | 22 | TCP | 外部 | 用于远程服务器登录和命令执行的安全外壳协议 (Secure Shell)。 


| rke2 服务器 | 9345 | TCP | 节点间 | RKE2 监管 API（仅限受信任网络）。 


| kube-apiserver | 6443 | TCP | 节点间 | Kubernetes API 服务器端口（仅限受信任的网络）。 


| rpcbind/端口映射器 | 111 | TCP/UDP | 节点间 | 用于服务间的 RPC 通信。 


| coredns（DNS） | 53 | TCP/UDP | 节点间 | 集群内用于名称解析的域名系统 (DNS) 服务。 


| NTP | 123 | UDP | 节点间 | 网络时间协议（NTP）用于时间同步。 


| etcd | 2379、2380、2381 | TCP | 节点间 | 用于存储集群数据的键值存储。 


| kube-vip | 2112 | TCP | 节点间 | Kubernetes API 服务器端口。 


| kubelet | 10248、10250 | TCP | 节点间 | Kubernetes 组件 


| kube-controller | 10257 | TCP | 节点间 | Kubernetes 组件 


| 云控制器 | 10258 | TCP | 节点间 | Kubernetes 组件 


| kube-scheduler | 10259 | TCP | 节点间 | Kubernetes 组件 


| kube-proxy | 10249、10256 | TCP | 节点间 | Kubernetes 组件 


| 加州节点 | 9091、9099 | TCP | 节点间 | Calico 网络组件。 


| containerd | 10010 | TCP | 节点间 | 容器守护进程服务。 


| VXLAN（法兰绒） | 8472 | UDP | 节点间 | 用于 pod 通信的覆盖网络。 
|===

NOTE: 对于高可用性部署，请确保所有节点之间都已打开 UDP 端口 8472。该端口支持跨节点的 pod 间通信；阻塞该端口将中断节点间网络连接。



== ONTAP tools for VMware vSphere的配置限制

您可以使用下表作为指南来ONTAP tools for VMware vSphere。

|===


| 部署 | *类型* | vVols数量 | *主机数量* 


| 非HA | 小号（S） | ~12K | 32 


| 非HA | 中号（M） | ~24K | 64 


| 高可用性 | 小号（S） | ~24K | 64 


| 高可用性 | 中号（M） | ~5万 | 128 


| 高可用性 | 大号（L） | ~10万 | 256 [注意] 表中的主机数量显示来自多个 vCenter 的主机总数。 
|===


== ONTAP tools for VMware vSphere- 存储复制适配器 (SRA)

下表显示了使用适用ONTAP tools for VMware vSphere的每个 VMware Live Site Recovery 实例支持的数量。

|===
| vCenter 部署规模 | *小的* | *中等的* 


| 配置使用基于阵列的复制进行保护的虚拟机总数 | 2000 | 5000 


| 基于阵列的复制保护组总数 | 250 | 250 


| 每个恢复计划的保护组总数 | 50 | 50 


| 复制数据存储的数量 | 255 | 255 


| 虚拟机数量 | 4000 | 7000 
|===
下表显示了 VMware Live Site Recovery 的数量以及与 ONTAP tools for VMware vSphere。

|===


| *VMware Live Site Recovery 实例数量* | * ONTAP工具部署规模* 


| 最多 4 | 小型 


| 4 至 8 | 中 


| 超过8 | 大型 
|===
有关更多信息，请参阅 https://techdocs.broadcom.com/us/en/vmware-cis/live-recovery/live-site-recovery/9-0/overview/site-recovery-manager-system-requirements/operational-limits-of-site-recovery-manager.html["VMware Live Site Recovery 的操作限制"] 。
